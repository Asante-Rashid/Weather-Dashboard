<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather Dashboard</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css">
</head>

<body>
    <nav class="navbar has-background-grey-dark has-text-centered">
        <p class="navbar-item has-text-white title">Weather Dashboard</p>
    </nav>
    <div class="tile is-ancestor m-2">
        <div class="tile is-4 is-child is-vertical p-4">
            <article class="tile is-child ">
                <p class="subtitle">Search for a City:</p>
                <div class="field has-addons">
                    <div class="control">
                        <input id="city-input" class="input" type="text">
                    </div>
                    <div id="search" class="control">
                        <a class="button is-info">
                            Search
                        </a>
                    </div>
                </div>
            </article>
            <div class="tile is-child ">
                <div class="tile is-child box">City 1</div>
                <div class="tile is-child box"></div>
                <div class="tile is-child box"></div>
                <div class="tile is-child box"></div>
                <div class="tile is-child box"></div>
                <div class="tile is-child box"></div>
                <div class="tile is-child box"></div>

            </div>

        </div>
        <div class="tile is-vertical is-parent">
            <article class="tile is-child box">
                <p id="current-city" class="title">City</p>
                <p id="current-temp" class="content">Temperature:</p>
                <p id="current-humidity" class="content">Humidity:</p>
                <p id="current-wind" class="content">Wind Speed:</p>
                <p id="current-uv" class="content">UV Index:</p>
            </article>
            <div class="tile is-vertical">
                <div class="tile is-parent">
                    <p>5-Day Forecast:</p>
                </div>
                <div class="tile">
                    <div class="tile is-child box"></div>
                    <div class="tile is-child box"></div>
                    <div class="tile is-child box"></div>
                    <div class="tile is-child box"></div>
                    <div class="tile is-child box"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script type="text/javascript">

        $("#search").on("click", function (event) {
            event.preventDefault();
            var apiKey = "62420d09c80e7614a49ca948ad697a03";
            var city = $("#city-input").val();

            var queryCurrentURL = "https://api.openweathermap.org/data/2.5/weather?q=" + city + "&appid=" + apiKey;

            $.ajax({
                url: queryCurrentURL,
                method: "GET"
            }).then(function (response) {
                // instread of console log this should manipuilate the DOM like in the previous homwork
                console.log(response);
                $("#current-city").text(response.name);
                $("#current-temp").text("Temperature: " + response.main.temp);
                $("#current-humidity").text("Humidity: " + response.main.humidity);
                $("#current-wind").text("Wind Speed " + response.wind.speed);

                var lat = response.coord.lat;
                var lon = response.coord.lon;
                var queryForecastURL = "https://api.openweathermap.org/data/2.5/onecall?lat=" + lat + "&lon=" + lon + "&exclude=current,minutely,hourly,alerts&appid=" + apiKey;
                $.ajax({
                    url: queryForecastURL,
                    method: "GET"
                }).then(function (response2) {
                    console.log(response2);

                    $("#current-uv").text("UC Index: " + response2.daily[0].uvi);
                });
            });
        });

    </script>

</body>

</html>